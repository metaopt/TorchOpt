Contributing to TorchOpt
========================


Install Develop Version
-----------------------

To install TorchOpt in an "editable" mode, run

.. code-block:: bash

    pip install -e .

in the main directory. This installation is removable by

.. code-block:: bash

    python setup.py develop --uninstall


Lint Check
----------

We use several tools to secure code quality, including:

    * PEP8 code style: ``black``, ``isort``, ``pylint``, ``flake8``
    * Type hint check: ``mypy``
    * C++ Google-style: ``cpplint``, ``clang-format``
    * License: ``addlicense``
    * Documentation: ``pydocstyle``, ``doc8``

To make things easier, we create several shortcuts as follows.

To automatically format the code, run:

.. code-block:: bash

    make format

To check if everything conforms to the specification, run:

.. code-block:: bash

    make lint


Test Locally
------------

This command will run automatic tests in the main directory

.. code-block:: bash

    $ make test


Documentation
-------------

Documentations are written under the :gitcode:`docs/source` directory as ReStructuredText (``.rst``) files. ``index.rst`` is the main page. A Tutorial on ReStructuredText can be found `here <https://pythonhosted.org/an_example_pypi_project/sphinx.html>`_.

API References are automatically generated by `Sphinx <http://www.sphinx-doc.org/en/stable/>`_ according to the outlines under directory :gitcode:`docs/source/api` and should be modified when any code changes.

To compile documentation into webpage, run

.. code-block:: bash

    $ make docs

The generated webpage locates under directory ``docs/build`` and will open the browser after building documentation.

Detailed documentation is hosted online at https://torchopt.readthedocs.io.
